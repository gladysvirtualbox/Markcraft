{% extends 'base.html' %}
{% block title %}School Dashboard{% endblock %}

{% block content %}
    <div class="container mt-5">
        
        <h1 class="mt-4">School Dashboard</h1>

        <div class="row mt-4">
            <div class="col-md-4">
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">Total Students</h5>
                        <p class="card-text">{{ total_students }}</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">Total Marks Entered</h5>
                        <p class="card-text">{{ total_marks }}</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">Mark Statistics</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">Average Mark: {{ average_mark }}</li>
                            <li class="list-group-item">Highest Mark: {{ highest_mark }}</li>
                            <li class="list-group-item">Lowest Mark: {{ lowest_mark }}</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">Top Performing Students</h5>
                        <div class="card-text">
                            <h6 class="card-subtitle mb-2 text-muted">By Average Mark</h6>
                            <ul class="list-group list-group-flush">
                                {% for student in top_students_by_average %}
                                    <li class="list-group-item">{{ student.last_name }}, {{ student.first_name }} (Average: {{ student.average_mark }})</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">Top Performing Students</h5>
                        <div class="card-text">
                            <h6 class="card-subtitle mb-2 text-muted">By Highest Mark</h6>
                            <ul class="list-group list-group-flush">
                                {% for student in top_students_by_highest_mark %}
                                    <li class="list-group-item">{{ student.last_name }}, {{ student.first_name }} (Highest: {{ student.highest_mark }})</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">Top Performing Students</h5>
                        <div class="card-text">
                            <h6 class="card-subtitle mb-2 text-muted">By Lowest Mark</h6>
                            <ul class="list-group list-group-flush">
                                {% for student in top_students_by_lowest_mark %}
                                    <li class="list-group-item">{{ student.last_name }}, {{ student.first_name }} (Lowest: {{ student.lowest_mark }})</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Recent Activity</h5>
                <!-- Add content for recent activity here -->
            </div>
        </div>

    </div>
{% endblock %}
